---
title: 简单的设计模式
categories:
  - 笔记
tags:
  - 设计模式
  - 模板方法
  - 工厂
date: 2018-08-19 11:21:11
---
 这是摘要
 <!-- more -->


## 模板方法
参考地址:http://www.hollischuang.com/archives/420
1. 概念
在一个方法中定义了一个算法的骨架或者步骤，而将一些步骤延迟到子类中去实现。模板方法使得子类可以在不改变算法结构的情况下，重新定义算法中的某一些步骤。
2. 场景
去银行的营业厅办理业务需要以下步骤：1.取号、2.办业务、3.评价。三个步骤中取号和评价都是固定的流程，每个人要做的事儿都是一样的。但是办业务这个步骤根据每个人要办的事情不同所以需要有不同的实现。我们可以将整个办业务这件事儿封装成一个抽象类：
3. 实现抽象类步骤骨架
```java
public abstract class AbstractBusinessHandeler {
    /**
     * 模板方法
     */
    public final void execute(){
        getRowNumber();
        handle();
        judge();
    }
    /**
     * 取号
     * @return
     */
    private void getRowNumber(){
        System.out.println("rowNumber-00" + RandomUtils.nextInt());
    }
    /**
     * 办理业务
     */
    public abstract void handle(); //抽象的办理业务方法，由子类实现
    /**
     * 评价
     */
    private void judge(){
        System.out.println("give a praised");
    }
}
```
4. 子类继承实现抽象方法
```java
public class SaveMoneyHandler extends AbstractBusinessHandeler {
    @Override
    public void handle() {
        System.out.println("save 1000");
    }
    public static void main(String []args){
        SaveMoneyHandler saveMoneyHandler = new SaveMoneyHandler();
        saveMoneyHandler.execute();
    }
}//output:编号：rowNumber-001   save 1000   give a praised
```
5. 钩子方法
当在模板方法中某一些步骤是可选的时候，也就是该步骤不一定要执行，可以由子类来决定是否要执行，则此时就需要用上钩子。钩子是一种被声明在抽象类中的方法，但一般来说它只是空的或者具有默认值，子类可以实现覆盖该钩子，来设置算法步骤的某一步骤是否要执行。钩子可以让子类实现算法中可选的部分，让子类能够有机会对模板方法中某些一即将发生的步骤做出反应。
```java
public abstract class AbstractBusinessHandeler {

    public final void execute(){
        if(!isVip()){//如果顾客是vip，则不用排队
            getRowNumber();
        }
        handle();
        judge();
    }

    public abstract boolean isVip();//抽象的钩子方法，由子类实现

    private void getRowNumber(){
        System.out.println("rowNumber-00" + RandomUtils.nextInt());
    }

    public abstract void handle(); 

    private void judge(){
        System.out.println("give a praised");
    }
}
```





