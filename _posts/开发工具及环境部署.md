---
title: 开发工具及环境部署
categories:
  - 笔记
tags:
  - git
date: 2018-07-07 20:49:38
---
 这是摘要
 <!-- more -->


#git
## git使用
### 提交
1. 合并add和commit
`git commit -am "message"`
以上命令可以直接将tracked状态的文件提交
2. 追加提交
`git commit --amend`
3. commit和merge技巧
建议一个commit只修改一个问题,这样如果想在多个分支之间同步一个修改,
只需要用`git cherry-pick commitId`就可以完成

### 回退
1. 回退单个文件
`git reset head filename`
以上命令可以将暂存区的文件回退到工作区,也就是将add过的文件变回add之前的状态
`git reset head`
这个命令就是将所有暂存区的文件回退到工作区
2. 回退版本
参考地址:https://www.cnblogs.com/qianqiannian/p/6010238.html
`git reset --hard head^`
以上命令可以将代码回退到当前最新的commit
`git reset --hard commit_id`
将代码回退到指定commit
3. 撤销commit
`git revert head`
还原已经提交的修改,是提交一个新的版本，将需要revert的版本的内容再反向修改回去，版本会递增，不影响之前提交的内容。
此次操作之前和之后的commit和history都会保留，并且把这次撤销作为一次最新的提交 
`git revert HEAD` 
撤销前一次 commit 
`git revert HEAD^` 
撤销前前一次 commit 
`git revert commit-id` 
撤销指定的版本，撤销也会作为一次提交进行保存

### 分支管理
1. 查看当前分支基于那个分支

2. 将主线代码合并到自己的分支
    1. 切换到master分支
      　　`git checkout master`
    2. 将remote master同步到local master
      　　`git pull origin master`
    3. 切换到的local开发分支
      　　`git checkout dev-mine`
    4. 合并 local master 到 local的开发分支
         `git merge master`
    5. 推送更新到gitlab，使gitlab同步更新显示
       　 `git push origin dev-minw`
3. 创建分支
    1. 基于远程分支创建本地分支
    `git checkout -b dev-local origin/dev-remote`
    这样创建的分支是有关联的,然后基于这个分支再拉一个分支做开发,开发完之后push到远程,发起pull request(github)或者merge request(gitlab)
    2. 建立本地分支和远程分支的关联
    `git branch --set-upstream-to origin/dev-remote`
    2. 基于当前分支创建分支(假设是master)
    `git checkout -b dev-basedon-master`
    或者是
    `git checkout -b dev-basedon-master master`
    3. 重命名本地分支
    `git branch -m dev-old dev-new`
    4. 删除远程分支
    `git push origin :dev-remote`
    5. 查看分支
    `git branch`
    查看本地分支
    `git branch -r`
    查看远程分支
    `git branch -vv`
    查看本地分支和远程分支的关联
    6. 删除本地分支
    `git branch -d branch-name`
    -D是强制删除

### 暂时保存工作进度
`[]`方括号中内容为可选，`[<stash>]`里面的stash代表进度的编号形如：`stash@{0}`, `<>`尖括号内的必填
`git stash`  对当前的暂存区和工作区状态进行保存。 
`git stash save "work about something on branch-xxx"`最好写个记录
`git stash list`  列出所有保存的进度列表。 
`git stash pop [--index] [<stash>]` 恢复工作进度
如：以下命令恢复编号为0的进度的工作区和暂存区
`git stash pop --index stash@{0}`
`git stash apply [--index] [<stash>]` 不删除已恢复的进度，其他同git stash pop 
`git stash drop [<stash>]` 删除某一个进度，默认删除最新进度 
`git stash clear` 删除所有进度 
`git stash branch <branchname> <stash>` 基于进度创建分支

### 查看记录
1. 查看某次commit的所有文件改动内容
`git show commit_id` 
2. 查看历史commit
`git log [--pretty=oneline]`













